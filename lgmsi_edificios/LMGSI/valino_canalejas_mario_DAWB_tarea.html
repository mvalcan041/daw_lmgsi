<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edificios con JavaScript - Mario Valiño Canalejas</title>
</head>
<body>
    <script>
        // Definición del objeto Edificio.
        function Edificio(calle, numero, codigoPostal) {
            this.calle = calle;
            this.numero = numero;
            this.codigoPostal = codigoPostal;
            this.plantas = [];
            document.write(`Construido un nuevo edificio en la calle: ${calle}, nº: ${numero}, CP: ${codigoPostal}. <br>`);

            // Método para agregar plantas y puertas al edificio.
            this.agregarPlantasYPuertas = function(numplantas, puertas) {
                for (let i = 0; i < numplantas; i++) {
                    this.plantas.push(new Array(puertas).fill(null));
                }
            };

            // Método para modificar el número del edificio.
            this.modificarNumero = function(numero) {
                this.numero = numero;
            };

            // Método para modificar la calle del edificio.
            this.modificarCalle = function(calle) {
                this.calle = calle;
            };

            // Método para modificar el código postal del edificio.
            this.modificarCodigoPostal = function(codigo) {
                this.codigoPostal = codigo;
            };

            // Método para imprimir el nombre de la calle del edificio.
            this.imprimeCalle = function() {
                return this.calle;
            };

            // Método para imprimir el número del edificio.
            this.imprimeNumero = function() {
                return this.numero;
            };

            // Método para imprimir el código postal del edificio.
            this.imprimeCodigoPostal = function() {
                return this.codigoPostal;
            };

            // Método para agregar un propietario a una puerta de una planta específica.
            this.agregarPropietario = function(nombre, planta, puerta) {
                this.plantas[planta - 1][puerta - 1] = nombre;
                document.write(`${nombre} es ahora el propietario de la puerta ${puerta} de la planta ${planta}. <br>`);
            };

            // Método para imprimir los propietarios de todas las puertas del edificio.
            this.imprimePlantas = function() {
                document.write(`Listado de propietarios del edificio calle ${this.calle} número ${this.numero}. <br>`);
                for (let i = 0; i < this.plantas.length; i++) {
                    for (let j = 0; j < this.plantas[i].length; j++) {
                        if (this.plantas[i][j] !== null) {
                                document.write(`Propietario del piso ${(j + 1)} de la planta ${(i + 1)}: ${this.plantas[i][j]}. <br>`);
                        } else {
                            document.write(`Propietario del piso ${(j + 1)} de la planta ${(i + 1)}:<br>`);
                        }
                    }
                }
            };
        }

        // Uso del Script.
        let edificioA = new Edificio("Garcia Prieto", 58, "15706");
        let edificioB = new Edificio("Camino Caneiro", 29, "32004");
        let edificioC = new Edificio("San Clemente", "s/n", "15705");

        document.write(`El código postal del edificio A es: ${edificioA.imprimeCodigoPostal()}. <br>`)
        document.write(`La calle del edificio C es: ${edificioC.imprimeCalle()}. <br>`)
        document.write(`El edificio B está situado en la calle ${edificioB.imprimeCalle()} número ${edificioB.imprimeNumero()}. <br>`)
        document.write("<br>")

        edificioA.agregarPlantasYPuertas(2, 3);

        edificioA.agregarPropietario("Jose Antonio Lopez", 1, 1);
        edificioA.agregarPropietario("Luisa Martinez", 1, 2);
        edificioA.agregarPropietario("Marta Castellón", 1, 3);
        edificioA.agregarPropietario("Antonio Pereira", 2, 2);
        document.write("<br>")

        edificioA.imprimePlantas();
        document.write("<br>")

        edificioA.agregarPlantasYPuertas(1, 3);

        edificioA.agregarPropietario("Pedro Meijide", 3, 2);
        document.write("<br>")

        edificioA.imprimePlantas();
    </script>
</body>
</html>